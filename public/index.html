<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket Demo</title>
    <style>
      body {
        font-family: 'Arial', sans-serif;
        background-color: #000;
        color: white;
        overflow: hidden;
        margin: 0;
        padding: 0;
        transition: background-color 0.5s ease;
      }
      .track-info {
        position: absolute;
        text-align: center;
        width: 100%;
        height: 10%;
        opacity: 0;
      }
      .bar {
        height: 100%;
        width: 0%;
        transition: width 0.5s ease;
      }

      #track-0 .bar { background-color: #9E9E9E; }
      #track-2 .bar { background-color: #4CAF50; }
      #track-3 .bar { background-color: #03A9F4; }
    </style>
  </head>
  <body>
    <div id="track-0" class="track-info" style="top: 10%;"><div class="bar"></div></div>

    <div id="track-2" class="track-info" style="top: 50%;"><div class="bar"></div></div>
    <div id="track-3" class="track-info" style="top: 70%;"><div class="bar"></div></div>

    <script>
      const ws = new WebSocket('ws://localhost:8001');

      ws.onmessage = function (event) {
        const data = JSON.parse(event.data);
        const { velocity, track } = data;

        if (track === 1) {

          document.body.style.backgroundColor = velocity === 0 ? '#000' : '#FFF';
        } else {
          const div = document.getElementById(`track-${track}`);
          const bar = div.querySelector('.bar');

          if (velocity === 0) {
            div.style.opacity = 0;
          } else {
            div.style.opacity = 1;
            bar.style.width = `${velocity}%`;
          }
        }
      };
    </script>
  </body>
</html>
