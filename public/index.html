<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket Demo</title>
  </head>
  <body>
    <h1 id="midi">Off</h1>
    <script>
      const ws = new WebSocket('ws://localhost:8001');
      let midi = '';

      ws.onopen = function(event) {
        console.log('Connection is open fuck you!');
      };

      ws.onerror = function(error) {
        console.log('WebSocket Error: ', error);
      };

      ws.onmessage = function(event) {
        const data = JSON.parse(event.data)
        const { pitch, velocity, track } = data;

        if (velocity === 0) {
          midi = 'Off';
        } else {
          midi = 'On';
        }

        document.getElementById('midi').textContent = midi;
      };
    </script>
  </body>
</html>
